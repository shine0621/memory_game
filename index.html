
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>과일 메모리 게임</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background-color: #f0f8ff;
    }
    h1 {
      margin-top: 20px;
    }
    #game {
      display: grid;
      grid-template-columns: repeat(5, 100px);
      grid-gap: 10px;
      justify-content: center;
      margin-top: 30px;
    }
    .card {
      width: 100px;
      height: 100px;
      background-color: #ccc;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      cursor: pointer;
      border-radius: 10px;
    }
    .flipped {
      background-color: white;
    }
    #score {
      margin-top: 20px;
      font-size: 20px;
    }
    #confetti {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <h1>🍓 과일 메모리 게임 🍎</h1>
  <div id="score">점수: 0</div>
  <div id="game"></div>
  <canvas id="confetti"></canvas>

  <script>
    const fruits = ['🍎','🍌','🍇','🍓','🍊'];
    let cards = [...fruits, ...fruits];
    let flippedCards = [];
    let matched = 0;
    let score = 0;

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    shuffle(cards);
    const game = document.getElementById('game');

    cards.forEach((fruit, index) => {
      const card = document.createElement('div');
      card.classList.add('card');
      card.dataset.fruit = fruit;
      card.dataset.index = index;
      card.innerHTML = '';
      card.addEventListener('click', flipCard);
      game.appendChild(card);
    });

    function flipCard() {
      if (flippedCards.length >= 2 || this.classList.contains('flipped')) return;

      this.classList.add('flipped');
      this.innerHTML = this.dataset.fruit;
      flippedCards.push(this);

      if (flippedCards.length === 2) {
        const [first, second] = flippedCards;
        if (first.dataset.fruit === second.dataset.fruit) {
          score += 10;
          document.getElementById('score').textContent = `점수: ${score}`;
          flippedCards = [];
          matched += 2;
          if (matched === cards.length) fireConfetti();
        } else {
          setTimeout(() => {
            first.classList.remove('flipped');
            second.classList.remove('flipped');
            first.innerHTML = '';
            second.innerHTML = '';
            flippedCards = [];
          }, 1000);
        }
      }
    }

    function fireConfetti() {
      const canvas = document.getElementById('confetti');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      const particles = Array.from({ length: 100 }, () => ({
        x: canvas.width / 2,
        y: canvas.height / 2,
        radius: Math.random() * 6 + 2,
        color: `hsl(${Math.random() * 360}, 100%, 60%)`,
        dx: (Math.random() - 0.5) * 10,
        dy: (Math.random() - 0.5) * 10
      }));

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach(p => {
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
          ctx.fillStyle = p.color;
          ctx.fill();
        });
      }

      function update() {
        particles.forEach(p => {
          p.x += p.dx;
          p.y += p.dy;
          p.dy += 0.2;
        });
      }

      function animate() {
        draw();
        update();
        requestAnimationFrame(animate);
      }

      animate();
    }
  </script>
</body>
</html>
